/* This file is autogenerated by xbvcgen, DO NOT EDIT! */
#ifndef _XBVC_CORE_H_
#define _XBVC_CORE_H_

#include <stdint.h>

/* Message types */
enum xbvc_messages {
	{% for msg in msgs | sort(attribute='msg_id') %}
	E_MSG_{{msg.name.upper()}} = {{msg.msg_id}},
	{% endfor %}
	E_MSG_MAX,
};

/* Enumerations */
{% for enum in enumerations %}
enum {{enum.name}} {
	{% for key, value in enum.enum_pairs %}
	{{key}} = {{value}},
	{% endfor %}
};

{% endfor %}

/* Message Structures */
{% for msg in msgs | sort %}
struct x_{{msg.name}} {
	{% for pair in msg.value_pairs %}
	{{pair['type']}} {{pair['field_name']}};
	{% endfor %}
};

{% endfor %}

#define XBVCTOUCH(x) (void)x;
#define XBVC_NULL_RESPONSE 0

/* Handler Prototypes */

/* These are to be implemented by the end user! */

{% for p in prototypes %}
{{p}};
{% endfor %}
void xbvc_handle_decode_error_found();

/* Platform handler prototypes */
typedef int (*xbvc_data_handler)(uint8_t *, int);
typedef void (*xbvc_platform_init_handler)(void*);

/* XBVC API */
void xbvc_init(void *params,
	       xbvc_data_handler read,
	       xbvc_data_handler write,
	       xbvc_platform_init_handler platform_init);

void xbvc_run(void);
int xbvc_send(void *msg, uint32_t msg_type, uint32_t *rnd_id_ret);
int xbvc_send_response(void *msg, uint32_t msg_type,
                       uint32_t response_id, uint32_t *rnd_id_ret);
void xbvc_seed_random(uint32_t seed);

#endif /* XBVC_CORE_H */
